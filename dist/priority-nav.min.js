var e,t;e=window||void 0,t=function(e){var t,n,o,r,i,a,s,l={},d=[],c=!!document.querySelector&&!!e.addEventListener,u={},p=0,v=0,f={initClass:"js-priorityNav",mainNavWrapper:"nav",mainNav:"ul",navDropdownClassName:"nav__dropdown",navDropdownToggleClassName:"nav__dropdown-toggle",navDropdownLabel:"more",navDropdownBreakpointLabel:"menu",breakPoint:500,throttleDelay:50,offsetPixels:0,count:!0,moved:function(){},movedBack:function(){}},h=function(e,t,n){if("[object Object]"===Object.prototype.toString.call(e))for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(n,e[o],o,e);else for(var r=0,i=e.length;r<i;r++)t.call(n,e[r],r,e)},m=function(e,t){if(e.classList)e.classList.toggle(t);else{var n=e.className.split(" "),o=n.indexOf(t);o>=0?n.splice(o,1):n.push(t),e.className=n.join(" ")}},y=function(e){var t,r,a,s,l,d,c,p;t=e,r=window.getComputedStyle(t),a=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),n=t.clientWidth-a,e.querySelector(i).parentNode===e&&e.querySelector(i).offsetWidth,o=b(e)+u.offsetPixels,v=(s=document,l=window,d=s.compatMode&&"CSS1Compat"===s.compatMode?s.documentElement:s.body,c=d.clientWidth,p=d.clientHeight,l.innerWidth&&c>l.innerWidth&&(c=l.innerWidth,p=l.innerHeight),{width:c,height:p}).width};l.doesItFit=function(e){var t,a,s,c,p=0===e.getAttribute("instance")?p:u.throttleDelay;(t=function(){var t=e.getAttribute("instance");for(y(e);n<=o&&e.querySelector(r).children.length>0||v<u.breakPoint&&e.querySelector(r).children.length>0;)l.toDropdown(e,t),y(e),v<u.breakPoint&&g(e,t,u.navDropdownBreakpointLabel);for(;n>=d[t][d[t].length-1]&&v>u.breakPoint;)l.toMenu(e,t),v>u.breakPoint&&g(e,t,u.navDropdownLabel);d[t].length<1&&(e.querySelector(i).classList.remove("show"),g(e,t,u.navDropdownLabel)),e.querySelector(r).children.length<1?(e.classList.add("is-empty"),g(e,t,u.navDropdownBreakpointLabel)):e.classList.remove("is-empty"),w(e,t)},a=p,function(){var e=this,n=arguments,o=s&&!c;clearTimeout(c),c=setTimeout((function(){c=null,s||t.apply(e,n)}),a),o&&t.apply(e,n)})()};var w=function(e,t){d[t].length<1?(e.querySelector(a).classList.add("priority-nav-is-hidden"),e.querySelector(a).classList.remove("priority-nav-is-visible"),e.classList.remove("priority-nav-has-dropdown"),e.querySelector(".priority-nav__wrapper").setAttribute("aria-haspopup","false")):(e.querySelector(a).classList.add("priority-nav-is-visible"),e.querySelector(a).classList.remove("priority-nav-is-hidden"),e.classList.add("priority-nav-has-dropdown"),e.querySelector(".priority-nav__wrapper").setAttribute("aria-haspopup","true"))},S=function(e,t){e.querySelector(a).setAttribute("priorityNav-count",d[t].length)},g=function(e,t,n){e.querySelector(a).innerHTML=n};l.toDropdown=function(e,t){e.querySelector(i).firstChild&&e.querySelector(r).children.length>0?e.querySelector(i).insertBefore(e.querySelector(r).lastElementChild,e.querySelector(i).firstChild):e.querySelector(r).children.length>0&&e.querySelector(i).appendChild(e.querySelector(r).lastElementChild),d[t].push(o),w(e,t),e.querySelector(r).children.length>0&&u.count&&S(e,t),u.moved()},l.toMenu=function(e,t){e.querySelector(i).children.length>0&&e.querySelector(r).appendChild(e.querySelector(i).firstElementChild),d[t].pop(),w(e,t),e.querySelector(r).children.length>0&&u.count&&S(e,t),u.movedBack()};var b=function(e){for(var t=e.childNodes,n=0,o=0;o<t.length;o++)3!==t[o].nodeType&&(isNaN(t[o].offsetWidth)||(n+=t[o].offsetWidth));return n},q=function(e,n){window.attachEvent?window.attachEvent("onresize",(function(){l.doesItFit&&l.doesItFit(e)})):window.addEventListener&&window.addEventListener("resize",(function(){l.doesItFit&&l.doesItFit(e)}),!0),e.querySelector(a).addEventListener("click",(function(){m(e.querySelector(i),"show"),m(this,"is-open"),m(e,"is-open"),-1!==e.className.indexOf("is-open")?e.querySelector(i).setAttribute("aria-hidden","false"):(e.querySelector(i).setAttribute("aria-hidden","true"),e.querySelector(i).blur())})),document.addEventListener("click",(function(t){(function(e,t){for(var n=t.charAt(0);e&&e!==document;e=e.parentNode)if("."===n){if(e.classList.contains(t.substr(1)))return e}else if("#"===n){if(e.id===t.substr(1))return e}else if("["===n&&e.hasAttribute(t.substr(1,t.length-2)))return e;return!1})(t.target,"."+n.navDropdownClassName)||t.target===e.querySelector(a)||(e.querySelector(i).classList.remove("show"),e.querySelector(a).classList.remove("is-open"),e.classList.remove("is-open"))})),document.onkeydown=function(e){27===(e=e||window.event).keyCode&&(document.querySelector(i).classList.remove("show"),document.querySelector(a).classList.remove("is-open"),t.classList.remove("is-open"))}};NodeList.prototype.remove=HTMLCollection.prototype.remove=function(){for(var e=0,t=this.length;e<t;e++)this[e]&&this[e].parentElement&&this[e].parentElement.removeChild(this[e])},l.destroy=function(){u&&(document.documentElement.classList.remove(u.initClass),s.remove(),u=null,delete l.init,delete l.doesItFit)},c&&"undefined"!=typeof Node&&(Node.prototype.insertAfter=function(e,t){this.insertBefore(e,t.nextSibling)});var L=function(e){var t=e.charAt(0);return"."!==t&&"#"!==t};return l.init=function(e){if(u=function(e,t){var n={};return h(e,(function(t,o){n[o]=e[o]})),h(t,(function(e,o){n[o]=t[o]})),n}(f,e||{}),c||"undefined"!=typeof Node)if(L(u.navDropdownClassName)&&L(u.navDropdownToggleClassName)){var n=document.querySelectorAll(u.mainNavWrapper);h(n,(function(e){d[p]=[],e.setAttribute("instance",p++),(t=e)?(r=u.mainNav,e.querySelector(r)?(function(e,t){s=document.createElement("span"),i=document.createElement("ul"),(a=document.createElement("button")).innerHTML=t.navDropdownLabel,a.setAttribute("aria-controls","menu"),a.setAttribute("type","button"),i.setAttribute("aria-hidden","true"),e.querySelector(r).parentNode===e?(e.insertAfter(s,e.querySelector(r)),s.appendChild(a),s.appendChild(i),i.classList.add(t.navDropdownClassName),i.classList.add("priority-nav__dropdown"),a.classList.add(t.navDropdownToggleClassName),a.classList.add("priority-nav__dropdown-toggle"),a.setAttribute("type","button"),s.classList.add(t.navDropdownClassName+"-wrapper"),s.classList.add("priority-nav__wrapper"),e.classList.add("priority-nav")):console.warn("mainNav is not a direct child of mainNavWrapper, double check please")}(e,u),i="."+u.navDropdownClassName,e.querySelector(i)?(a="."+u.navDropdownToggleClassName,e.querySelector(a)?(q(e,u),l.doesItFit(e)):console.warn("couldn't find the specified navDropdownToggle element")):console.warn("couldn't find the specified navDropdown element")):console.warn("couldn't find the specified mainNav element")):console.warn("couldn't find the specified mainNavWrapper element")})),document.documentElement.classList.add(u.initClass)}else console.warn("No symbols allowed in navDropdownClassName & navDropdownToggleClassName. These are not selectors.");else console.warn("This browser doesn't support priorityNav")},l},"function"==typeof define&&define.amd?define("priorityNav",t(e)):"object"==typeof exports?module.exports=t(e):e.priorityNav=t(e);
